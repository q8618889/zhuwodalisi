<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å¤§ç†å¯ºå°‘å¿ç”„è¿œé“ä¹‹å¥³å¹´1 Â· æ–°å¹´è´ºå¡ 2026</title>
<style>
  /* ============ CSS Reset & Base ============ */
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --red: #e74c3c;
    --gold: #f1c40f;
    --dark-red: #c0392b;
    --bg-dark: #1a0a0a;
    --bg-card: rgba(255,255,255,0.06);
    --text-light: #fff;
    --text-muted: rgba(255,255,255,0.65);
    --accent: #ff6b6b;
    --gradient-red: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
    --gradient-gold: linear-gradient(135deg, #f1c40f 0%, #e67e22 100%);
    --gradient-festive: linear-gradient(135deg, #e74c3c 0%, #f39c12 50%, #e74c3c 100%);
  }

  html { scroll-behavior: smooth; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
    background: var(--bg-dark);
    color: var(--text-light);
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
  }

  /* ============ èƒŒæ™¯æ¸å˜å…‰æ™•åŠ¨ç”» ============ */
  .bg-glow {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: -1;
    pointer-events: none;
    background:
      radial-gradient(ellipse 80% 50% at 20% 20%, rgba(231,76,60,0.12) 0%, transparent 50%),
      radial-gradient(ellipse 60% 40% at 80% 80%, rgba(241,196,15,0.08) 0%, transparent 50%),
      radial-gradient(ellipse 50% 30% at 50% 50%, rgba(255,107,107,0.06) 0%, transparent 60%);
    animation: bgPulse 8s ease-in-out infinite;
  }
  @keyframes bgPulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.85; transform: scale(1.02); }
  }

  /* ============ æµ®åŠ¨é‡‘è‰²ç²’å­å±‚ ============ */
  #float-particles {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
  }
  .float-dot {
    position: absolute;
    width: 4px; height: 4px;
    border-radius: 50%;
    background: radial-gradient(circle, #ffd700 0%, rgba(241,196,15,0.3) 100%);
    box-shadow: 0 0 6px rgba(255,215,0,0.5);
    animation: floatDrift 15s linear infinite;
  }
  .float-dot.red {
    background: radial-gradient(circle, #ff6b6b 0%, rgba(231,76,60,0.3) 100%);
    box-shadow: 0 0 6px rgba(231,76,60,0.5);
  }
  @keyframes floatDrift {
    0% { transform: translate(0, 0) scale(1); opacity: 0.6; }
    25% { transform: translate(10px, -20px) scale(1.1); opacity: 0.8; }
    50% { transform: translate(-5px, -40px) scale(0.9); opacity: 0.5; }
    75% { transform: translate(15px, -60px) scale(1.05); opacity: 0.7; }
    100% { transform: translate(0, -80px) scale(1); opacity: 0.6; }
  }

  /* ============ é—ªçƒæ˜Ÿæ˜Ÿå±‚ ============ */
  #twinkle-stars {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
  }
  .star {
    position: absolute;
    width: 2px; height: 2px;
    border-radius: 50%;
    background: #fff;
    box-shadow: 0 0 4px rgba(255,255,255,0.8);
    animation: twinkle 3s ease-in-out infinite;
  }
  @keyframes twinkle {
    0%, 100% { opacity: 0.2; transform: scale(1); }
    50% { opacity: 0.9; transform: scale(1.3); }
  }

  /* ============ è§¦æ‘¸/ç‚¹å‡»æ¶Ÿæ¼ª ============ */
  .touch-ripple {
    position: fixed;
    border-radius: 50%;
    pointer-events: none;
    z-index: 9998;
    border: 2px solid rgba(255,215,0,0.6);
    animation: rippleExpand 0.8s ease-out forwards;
  }
  @keyframes rippleExpand {
    0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(4); opacity: 0; }
  }

  /* ============ è§¦æ‘¸ç²’å­çˆ†å‘å®¹å™¨ ============ */
  #touch-burst-container {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none;
    z-index: 9999;
  }
  .burst-particle {
    position: absolute;
    pointer-events: none;
    font-size: 1.2rem;
    animation: burstFly 1s ease-out forwards;
    will-change: transform, opacity;
  }
  @keyframes burstFly {
    0% {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
    100% {
      transform: translate(-50%, -50%) translate(var(--tx), var(--ty)) scale(0.4);
      opacity: 0;
    }
  }

  /* ============ Fireworks Canvas ============ */
  #fireworks-canvas {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none; z-index: 0;
  }

  /* ============ Snowfall ============ */
  .snowflake {
    position: fixed;
    top: -10px;
    color: #fff;
    font-size: 1em;
    animation: snowfall linear infinite;
    pointer-events: none;
    z-index: 1;
    opacity: 0.7;
  }
  @keyframes snowfall {
    0%   { transform: translateY(0) rotate(0deg); opacity: 0.7; }
    100% { transform: translateY(100vh) rotate(360deg); opacity: 0.2; }
  }

  /* ============ Lanterns ============ */
  .lantern-container {
    position: fixed; top: 0; left: 0; width: 100%; z-index: 2;
    display: flex; justify-content: space-between; padding: 0 5%;
    pointer-events: none;
  }
  .lantern {
    width: 60px; height: 90px;
    background: radial-gradient(circle at 50% 40%, #ff4444, #cc0000);
    border-radius: 50% 50% 45% 45%;
    position: relative;
    animation: lanternSwing 3s ease-in-out infinite;
    box-shadow: 0 0 30px rgba(255,68,68,0.4);
    transform-origin: top center;
  }
  .lantern::before {
    content: 'ç¦';
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-size: 24px; font-weight: bold;
    color: #ffd700;
    text-shadow: 0 0 10px rgba(255,215,0,0.5);
  }
  .lantern::after {
    content: '';
    position: absolute; top: -20px; left: 50%;
    transform: translateX(-50%);
    width: 4px; height: 20px;
    background: #8b4513;
  }
  .lantern .tassel {
    position: absolute; bottom: -25px; left: 50%;
    transform: translateX(-50%);
    width: 6px; height: 25px;
    background: linear-gradient(#ffd700, #cc0000);
    border-radius: 0 0 3px 3px;
  }
  @keyframes lanternSwing {
    0%, 100% { transform: rotate(-5deg); }
    50%      { transform: rotate(5deg); }
  }

  /* ============ Layout ============ */
  .container { max-width: 900px; margin: 0 auto; padding: 20px; position: relative; z-index: 10; }

  /* ============ Review Section ============ */
  #review-section { padding-bottom: 80px; padding-top: 20px; }

  /* ---- Hero Banner ---- */
  .hero-banner {
    text-align: center;
    padding: 80px 20px 60px;
    position: relative;
  }
  .hero-banner .year {
    font-size: 8rem; font-weight: 900;
    background: var(--gradient-gold);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    line-height: 1;
    animation: fadeInUp 0.8s ease;
  }
  .hero-banner .group-title {
    font-size: 2rem; margin-top: 12px;
    color: var(--gold);
    animation: fadeInUp 0.8s ease 0.2s both;
  }
  .hero-banner .tagline {
    font-size: 1.1rem;
    color: var(--text-muted);
    margin-top: 16px;
    animation: fadeInUp 0.8s ease 0.4s both;
  }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* ---- Stats Overview ---- */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 20px;
    margin: 40px 0;
  }
  .stat-card {
    background: var(--bg-card);
    border-radius: 20px;
    padding: 28px 20px;
    text-align: center;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.06);
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .stat-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.3);
  }
  .stat-card .icon { font-size: 2.2rem; margin-bottom: 10px; }
  .stat-card .number {
    font-size: 2.4rem; font-weight: 800;
    background: var(--gradient-gold);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .stat-card .label {
    font-size: 0.85rem; color: var(--text-muted);
    margin-top: 6px;
  }

  /* ---- Section Titles ---- */
  .section-title {
    font-size: 1.6rem;
    margin: 50px 0 24px;
    padding-left: 16px;
    border-left: 4px solid var(--accent);
    display: flex; align-items: center; gap: 10px;
  }
  .section-title .emoji { font-size: 1.4rem; }

  /* ---- Rankings ---- */
  .ranking-list { display: flex; flex-direction: column; gap: 14px; }
  .ranking-item {
    display: flex; align-items: center; gap: 16px;
    background: var(--bg-card);
    border-radius: 16px;
    padding: 18px 20px;
    border: 1px solid rgba(255,255,255,0.04);
    transition: transform 0.2s;
  }
  .ranking-item:hover { transform: translateX(6px); }
  .ranking-item .rank {
    width: 36px; height: 36px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-weight: 800; font-size: 1rem;
    background: rgba(255,255,255,0.08);
    color: var(--text-muted);
    flex-shrink: 0;
  }
  .ranking-item:nth-child(1) .rank { background: var(--gradient-gold); color: #000; }
  .ranking-item:nth-child(2) .rank { background: linear-gradient(135deg,#bdc3c7,#95a5a6); color: #000; }
  .ranking-item:nth-child(3) .rank { background: linear-gradient(135deg,#e67e22,#d35400); color: #fff; }
  .ranking-item .info { flex: 1; }
  .ranking-item .name { font-weight: 600; font-size: 1.05rem; }
  .ranking-item .detail { font-size: 0.85rem; color: var(--text-muted); margin-top: 2px; }
  .ranking-item .bar-bg {
    height: 6px; background: rgba(255,255,255,0.06);
    border-radius: 3px; margin-top: 6px; overflow: hidden;
  }
  .ranking-item .bar-fill {
    height: 100%; border-radius: 3px;
    background: var(--gradient-festive);
    transition: width 1.2s ease;
  }
  .ranking-item .count {
    font-size: 1.2rem; font-weight: 700;
    color: var(--gold);
    flex-shrink: 0;
  }

  /* ---- Highlights ---- */
  .highlights-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 20px;
  }
  .highlight-card {
    background: var(--bg-card);
    border-radius: 20px;
    padding: 24px;
    border: 1px solid rgba(255,255,255,0.06);
    transition: transform 0.3s;
  }
  .highlight-card:hover { transform: translateY(-3px); }
  .highlight-card .card-icon { font-size: 2rem; margin-bottom: 12px; }
  .highlight-card .card-title {
    font-size: 1.1rem; font-weight: 600;
    margin-bottom: 8px; color: var(--gold);
  }
  .highlight-card .card-content {
    font-size: 0.9rem; color: var(--text-muted);
    line-height: 1.7;
  }
  .highlight-card .card-quote {
    font-style: italic;
    margin-top: 12px;
    padding: 12px 16px;
    background: rgba(255,255,255,0.04);
    border-radius: 12px;
    border-left: 3px solid var(--accent);
    font-size: 0.88rem;
    color: rgba(255,255,255,0.7);
    word-break: break-all;
  }

  /* ---- Monthly Chart ---- */
  .chart-container {
    background: var(--bg-card);
    border-radius: 20px;
    padding: 30px;
    border: 1px solid rgba(255,255,255,0.06);
  }
  .bar-chart {
    display: flex; align-items: flex-end;
    gap: 8px; height: 200px;
    padding-top: 10px;
  }
  .bar-col {
    flex: 1;
    display: flex; flex-direction: column;
    align-items: center; justify-content: flex-end;
    height: 100%;
  }
  .bar-value {
    font-size: 0.7rem; color: var(--text-muted);
    margin-bottom: 4px;
  }
  .bar {
    width: 100%; max-width: 40px;
    border-radius: 6px 6px 2px 2px;
    background: var(--gradient-red);
    transition: height 1s ease;
    min-height: 4px;
  }
  .bar-label {
    font-size: 0.75rem; color: var(--text-muted);
    margin-top: 8px;
  }

  /* ---- Keyword Cloud ---- */
  .keyword-cloud {
    display: flex; flex-wrap: wrap;
    gap: 10px; justify-content: center;
    padding: 20px;
  }
  .keyword {
    padding: 8px 18px;
    background: rgba(255,255,255,0.06);
    border-radius: 50px;
    font-size: 0.9rem;
    color: var(--text-muted);
    border: 1px solid rgba(255,255,255,0.08);
    transition: all 0.3s;
    cursor: default;
  }
  .keyword:hover {
    background: var(--accent);
    color: #fff;
    transform: scale(1.1);
  }
  .keyword.large { font-size: 1.2rem; padding: 10px 22px; color: var(--gold); font-weight: 600; }
  .keyword.medium { font-size: 1rem; color: rgba(255,255,255,0.8); }

  /* ---- Memory Wall ---- */
  .memory-wall {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 16px;
  }
  .memory-card {
    background: var(--bg-card);
    border-radius: 16px;
    padding: 20px;
    border: 1px solid rgba(255,255,255,0.06);
    transition: all 0.3s;
  }
  .memory-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
  }
  .memory-card .msg-sender {
    font-weight: 600;
    color: var(--accent);
    font-size: 0.9rem;
  }
  .memory-card .msg-time {
    font-size: 0.75rem;
    color: rgba(255,255,255,0.3);
    margin-bottom: 8px;
  }
  .memory-card .msg-text {
    font-size: 0.92rem;
    color: rgba(255,255,255,0.75);
    line-height: 1.6;
  }

  /* ---- Greeting Card ---- */
  .greeting-section {
    text-align: center;
    padding: 60px 20px;
    margin-top: 40px;
    background: radial-gradient(ellipse at center, rgba(231,76,60,0.15) 0%, transparent 70%);
    border-radius: 30px;
  }
  .greeting-section .big-emoji { font-size: 5rem; margin-bottom: 20px; }
  .greeting-section h2 {
    font-size: 2.4rem;
    background: var(--gradient-gold);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 16px;
  }
  .greeting-section .blessing {
    font-size: 1.15rem;
    color: rgba(255,255,255,0.75);
    line-height: 2;
    max-width: 600px;
    margin: 0 auto;
  }
  .greeting-section .members-list {
    display: flex; flex-wrap: wrap;
    gap: 10px; justify-content: center;
    margin-top: 30px;
  }
  .greeting-section .member-tag {
    padding: 8px 18px;
    background: rgba(255,215,0,0.1);
    border: 1px solid rgba(255,215,0,0.25);
    border-radius: 50px;
    font-size: 0.9rem;
    color: var(--gold);
  }
  .greeting-section .sign-off {
    margin-top: 40px;
    font-size: 0.9rem;
    color: var(--text-muted);
  }

  /* ---- çº¢åŒ…åŒºå—ï¼ˆé¡µé¢æœ€åº•éƒ¨ï¼‰ ---- */
  .red-envelope-section {
    text-align: center;
    padding: 50px 20px 80px;
    margin-top: 20px;
  }
  .red-envelope-section .red-envelope-hint {
    font-size: 0.95rem;
    color: var(--text-muted);
    margin-bottom: 20px;
  }
  .red-envelope-btn {
    display: inline-block;
    cursor: pointer;
    background: none;
    border: none;
    padding: 28px;
    min-width: 140px;
    min-height: 140px;
    transition: transform 0.2s;
    animation: envelopeFloat 2s ease-in-out infinite;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    font-size: 7rem;
    line-height: 1;
  }
  .red-envelope-btn:hover { transform: scale(1.1); }
  .red-envelope-btn:active { transform: scale(0.95); }
  @keyframes envelopeFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }
  @media (max-width: 600px) {
    .red-envelope-btn {
      min-width: 120px;
      min-height: 120px;
      padding: 28px;
      font-size: 5.5rem;
    }
  }

  /* ---- çº¢åŒ…å¼¹çª— ---- */
  .red-envelope-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.75);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
  }
  .red-envelope-overlay.show {
    opacity: 1;
    visibility: visible;
  }
  .red-envelope-modal {
    position: relative;
    background: linear-gradient(180deg, #8b0000 0%, #5c0000 100%);
    border: 4px solid #ffd700;
    border-radius: 24px;
    padding: 40px 50px;
    text-align: center;
    max-width: 90%;
    box-shadow: 0 0 60px rgba(255,215,0,0.3), inset 0 0 40px rgba(0,0,0,0.3);
    transform: scale(0.5);
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  .red-envelope-overlay.show .red-envelope-modal {
    transform: scale(1);
  }
  .red-envelope-modal .envelope-icon {
    font-size: 5rem;
    margin-bottom: 16px;
    animation: envelopeShake 0.5s ease-in-out;
  }
  .red-envelope-overlay.show .red-envelope-modal .envelope-icon {
    animation: envelopeOpen 0.6s ease-out 0.2s forwards;
  }
  @keyframes envelopeShake {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-8deg); }
    75% { transform: rotate(8deg); }
  }
  @keyframes envelopeOpen {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.3); opacity: 0.8; }
    100% { transform: scale(1.2); opacity: 0; }
  }
  .red-envelope-modal .red-envelope-blessing {
    font-size: 2rem;
    font-weight: 800;
    color: #ffd700;
    text-shadow: 0 0 20px rgba(255,215,0,0.8), 0 0 40px rgba(255,215,0,0.4);
    letter-spacing: 0.4em;
    margin-bottom: 16px;
    opacity: 0;
    transform: scale(0.5);
    transition: opacity 0.5s ease, transform 0.5s ease;
  }
  .red-envelope-modal .red-envelope-blessing.show {
    opacity: 1;
    transform: scale(1);
    animation: blessingGlow 1.5s ease-in-out infinite;
  }
  @keyframes blessingGlow {
    0%, 100% { text-shadow: 0 0 20px rgba(255,215,0,0.8), 0 0 40px rgba(255,215,0,0.4); filter: brightness(1); }
    50% { text-shadow: 0 0 30px rgba(255,215,0,1), 0 0 60px rgba(255,215,0,0.6); filter: brightness(1.15); }
  }
  .red-envelope-modal .amount-wrap {
    margin: 20px 0;
    min-height: 60px;
  }
  .red-envelope-modal .amount-label {
    font-size: 0.9rem;
    color: rgba(255,255,255,0.7);
    margin-bottom: 4px;
  }
  .red-envelope-modal .amount {
    font-size: 2.4rem;
    font-weight: 800;
    color: #ffd700;
    text-shadow: 0 0 20px rgba(255,215,0,0.6);
    letter-spacing: 2px;
  }
  .red-envelope-modal .amount .unit {
    font-size: 1.2rem;
    font-weight: 600;
    margin-left: 4px;
    color: rgba(255,215,0,0.9);
  }
  .red-envelope-modal .amount.special-prize {
    font-size: 1.8rem;
    letter-spacing: 0.1em;
  }
  .red-envelope-modal .amount.special-prize .unit {
    display: none;
  }
  .red-envelope-modal .rules {
    font-size: 0.8rem;
    color: rgba(255,255,255,0.65);
    margin-top: 16px;
    padding: 12px 16px;
    background: rgba(0,0,0,0.2);
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.1);
    line-height: 1.7;
    text-align: left;
  }
  .red-envelope-modal .rules-title {
    color: rgba(255,215,0,0.9);
    font-weight: 600;
    margin-bottom: 6px;
  }
  .red-envelope-modal .hint {
    font-size: 0.95rem;
    color: rgba(255,255,255,0.85);
    margin-top: 16px;
    padding: 14px 20px;
    background: rgba(0,0,0,0.25);
    border-radius: 12px;
    border: 1px solid rgba(255,215,0,0.3);
    line-height: 1.6;
  }
  .red-envelope-modal .close-btn {
    margin-top: 24px;
    padding: 10px 32px;
    font-size: 1rem;
    color: #5c0000;
    background: linear-gradient(180deg, #ffd700 0%, #daa520 100%);
    border: none;
    border-radius: 50px;
    cursor: pointer;
    font-weight: 700;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    transition: transform 0.2s;
  }
  .red-envelope-modal .close-btn:hover { transform: scale(1.05); }
  .red-envelope-modal .close-btn:active { transform: scale(0.98); }
  .red-envelope-modal .coins-fly {
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -0.75rem;
    margin-top: -0.75rem;
    font-size: 1.5rem;
    pointer-events: none;
    animation: coinsFly 1s ease-out forwards;
  }
  @keyframes coinsFly {
    0% { transform: translate(0,0) scale(1); opacity: 1; }
    100% { transform: translate(var(--fx), var(--fy)) scale(0.3); opacity: 0; }
  }

  /* ---- Back Button ---- */
  .back-btn {
    position: fixed;
    bottom: 30px; right: 30px;
    width: 50px; height: 50px;
    border-radius: 50%;
    background: var(--gradient-red);
    border: none;
    color: #fff;
    font-size: 1.3rem;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(231,76,60,0.5);
    z-index: 100;
    transition: all 0.3s;
    display: none;
  }
  .back-btn:hover { transform: scale(1.1); }

  /* ---- Animations ---- */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }
  .animate-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* ---- Responsive ---- */
  @media (max-width: 600px) {
    .hero-banner .year { font-size: 4.5rem; }
    .hero-banner .group-title { font-size: 1.4rem; }
    .stats-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
    .stat-card { padding: 20px 14px; }
    .stat-card .number { font-size: 1.8rem; }
    .import-box { padding: 24px 16px; }
    .lantern { width: 40px; height: 60px; }
    .lantern::before { font-size: 16px; }
  }

  /* ---- Timeline ---- */
  .timeline-container {
    position: relative;
    padding: 20px 0;
  }
  .timeline-container::before {
    content: '';
    position: absolute;
    left: 20px;
    top: 0; bottom: 0;
    width: 2px;
    background: linear-gradient(to bottom, var(--accent), transparent);
  }
  .timeline-item {
    position: relative;
    padding-left: 50px;
    margin-bottom: 30px;
  }
  .timeline-item::before {
    content: '';
    position: absolute;
    left: 14px; top: 6px;
    width: 14px; height: 14px;
    border-radius: 50%;
    background: var(--accent);
    border: 3px solid var(--bg-dark);
  }
  .timeline-date {
    font-size: 0.8rem;
    color: var(--accent);
    font-weight: 600;
    margin-bottom: 4px;
  }
  .timeline-content {
    background: var(--bg-card);
    border-radius: 14px;
    padding: 16px;
    border: 1px solid rgba(255,255,255,0.06);
  }
  .timeline-content .tl-sender { font-weight: 600; color: var(--gold); font-size: 0.9rem; }
  .timeline-content .tl-msg { font-size: 0.88rem; color: var(--text-muted); margin-top: 4px; line-height: 1.5; }
</style>
</head>
<body>

<!-- èƒŒæ™¯å…‰æ™• -->
<div class="bg-glow"></div>

<!-- é—ªçƒæ˜Ÿæ˜Ÿ -->
<div id="twinkle-stars"></div>

<!-- æµ®åŠ¨ç²’å­å±‚ -->
<div id="float-particles"></div>

<!-- Fireworks Canvas -->
<canvas id="fireworks-canvas"></canvas>

<!-- è§¦æ‘¸çˆ†å‘å®¹å™¨ -->
<div id="touch-burst-container"></div>

<!-- Lanterns -->
<div class="lantern-container">
  <div class="lantern"><div class="tassel"></div></div>
  <div class="lantern" style="animation-delay:0.5s"><div class="tassel"></div></div>
  <div class="lantern" style="animation-delay:1s"><div class="tassel"></div></div>
  <div class="lantern" style="animation-delay:1.5s"><div class="tassel"></div></div>
</div>

<!-- ============ å¤§ç†å¯ºå°‘å¿ç”„è¿œé“ä¹‹å¥³å¹´1 å¹´åº¦å›é¡¾ ============ -->
<div id="review-section">
  <div class="container">
    <!-- Hero -->
    <div class="hero-banner">
      <div class="year">2026</div>
      <div class="group-title" id="reviewGroupName">å¤§ç†å¯ºå°‘å¿ç”„è¿œé“ä¹‹å¥³å¹´1</div>
      <div class="tagline">è¿‡å»ä¸€å¹´ï¼Œæ„Ÿè°¢æœ‰ä½ ä»¬çš„é™ªä¼´</div>
    </div>

    <!-- Stats -->
    <div class="stats-grid animate-on-scroll" id="statsGrid"></div>

    <!-- Monthly Activity -->
    <div class="section-title animate-on-scroll"><span class="emoji">ğŸ“Š</span> æ¯æœˆæ´»è·ƒåº¦</div>
    <div class="chart-container animate-on-scroll">
      <div class="bar-chart" id="monthlyChart"></div>
    </div>

    <!-- è¯å” æ¦œå• Top 3 å›ºå®š -->
    <div class="section-title animate-on-scroll"><span class="emoji">ğŸ‘‘</span> è¯å” æ¦œå•</div>
    <div class="ranking-list animate-on-scroll" id="rankingList"></div>

    <!-- Highlights -->
    <div class="section-title animate-on-scroll"><span class="emoji">âœ¨</span> ç¾¤èŠä¹‹æœ€</div>
    <div class="highlights-grid animate-on-scroll" id="highlightsGrid"></div>

    <!-- Keywords -->
    <div class="section-title animate-on-scroll"><span class="emoji">ğŸ’¬</span> å¹´åº¦çƒ­è¯</div>
    <div class="chart-container animate-on-scroll">
      <div class="keyword-cloud" id="keywordCloud"></div>
    </div>

    <!-- Memory Wall -->
    <div class="section-title animate-on-scroll"><span class="emoji">ğŸ§±</span> ç²¾é€‰æ¶ˆæ¯å¢™</div>
    <div class="memory-wall animate-on-scroll" id="memoryWall"></div>

    <!-- Greeting -->
    <div class="greeting-section animate-on-scroll" id="greetingSection"></div>

    <!-- çº¢åŒ…é¢†å–ï¼ˆé¡µé¢æœ€åº•éƒ¨ï¼Œç‹¬ç«‹æ¨¡å—ï¼‰ -->
    <div class="red-envelope-section animate-on-scroll" id="redEnvelopeSection">
      <p class="red-envelope-hint">ç‚¹å‡»ä¸‹æ–¹çº¢åŒ…é¢†å– FF14 é‡‘å¸</p>
      <button type="button" class="red-envelope-btn" id="redEnvelopeBtn" aria-label="æ‰“å¼€çº¢åŒ…">ğŸ§§</button>
    </div>
  </div>
</div>

<!-- çº¢åŒ…å¼¹çª— -->
<div class="red-envelope-overlay" id="redEnvelopeOverlay">
  <div class="red-envelope-modal">
    <div class="envelope-icon">ğŸ§§</div>
    <div class="red-envelope-blessing" id="redEnvelopeBlessing">é©¬å¹´å‰ç¥¥</div>
    <div class="amount-wrap" id="redEnvelopeAmountWrap">
      <div class="amount-label" id="redEnvelopeAmountLabel">FF14 é‡‘å¸</div>
      <div class="amount" id="redEnvelopeAmount">0<span class="unit">Gil</span></div>
    </div>
    <div class="rules">
      <div class="rules-title">ã€çº¢åŒ…è§„åˆ™ã€‘</div>
      <div>Â· æ™®é€šå¥–ï¼ˆFF14 é‡‘å¸ï¼‰ï¼šæˆªå›¾æ‰¾ç†Šå¤§ï¼Œåœ¨ 2 æœˆ 14 å·å…‘æ¢ï¼ˆä¸è¦çš„è¯ç¾¤é‡Œå‘ç†ŠäºŒä»£æ”¶ï¼‰</div>
      <div>Â· ç‰¹åˆ«å¥–ï¼ˆç½‘æ˜“äº‘éŸ³ä¹ä¼šå‘˜ä¸€ä¸ªæœˆï¼‰ï¼šæ¦‚ç‡ 490 åˆ†ä¹‹ 1ã€‚ç¬¬ä¸€ä¸ªæˆªå›¾åœ¨ 2 æœˆ 14 å·å‰å‘ç»™ç†ŠäºŒå…‘æ¢ã€‚ç½‘æ˜“å®˜æ–¹å…è´¹å¢é€çš„åˆ¶ä½œäººå¥–åŠ±ã€‚</div>
    </div>
    <div class="hint" id="redEnvelopeHint">ï¼‰çŒªä½ å¥½è¿ </div>
    <button type="button" class="close-btn" id="redEnvelopeCloseBtn">æ”¶ä¸‹äº†</button>
  </div>
</div>

<!-- Back to top -->
<button class="back-btn" id="backBtn" onclick="window.scrollTo({top:0,behavior:'smooth'})">â†‘</button>

<script>
// ============ å¤§ç†å¯ºå°‘å¿ç”„è¿œé“ä¹‹å¥³å¹´1 å›ºå®šæ•°æ® ============
const GROUP_NAME = 'å¤§ç†å¯ºå°‘å¿ç”„è¿œé“ä¹‹å¥³å¹´1';
const FIXED = {
  stats: {
    totalMessages: 2847,
    memberCount: 7,
    activeDays: 312,
    avgPerDay: 9,
    busiestDay: '2025-08-15',
    busiestCount: 42,
    peakHour: 22
  },
  monthlyCount: [62, 58, 71, 68, 75, 72, 78, 80, 74, 69, 65, 84],
  top3: [
    { name: 'å±±å±±', rank: 1, count: 892, pct: '31.3' },
    { name: 'ç†Šå¤§', rank: 2, count: 569, pct: '20.0' },
    { name: 'å¼¥ä¸€', rank: 3, count: 516, pct: '18.1' }
  ],
  highlights: [
    { icon: 'ğŸ˜‚', title: 'å¿«ä¹æºæ³‰', content: 'å±±å±± æœ€çˆ±è¯´ã€Œå“ˆå“ˆã€ã€Œæ”¾å±ã€ï¼Œä»ç¾é£ŸèŠåˆ°æ€»è£å…¬ä¸»ï¼Œæ˜¯ç¾¤é‡Œæœ€æ´»è·ƒçš„äººã€‚', quote: 'å“ˆå“ˆ æ”¾å±' },
    { icon: 'ğŸ˜„', title: 'è¡¨æƒ…åŒ…å¤§ç‹', content: 'æ‹ è¡¨æƒ…å›¾ç‰‡å¾ˆå¤šï¼Œè™½ç„¶ä¸å¤ªæ´»è·ƒï¼Œä½†ä¸€å‘å°±æ˜¯å›¾ã€‚', quote: '[å›¾ç‰‡][è¡¨æƒ…]' },
    { icon: 'ğŸ”', title: 'æœ¬å¹´åº¦å°–å«é¸¡', content: 'å¼¥ä¸€ å¸¸è¯´å±±å±±ã€ç†Šå¤§ã€å¤šå¤šï¼Œæ¸¸æˆä¸­éŸ³é‡ 100%ï¼Œå½“ä¹‹æ— æ„§çš„å°–å«é¸¡ã€‚', quote: 'å±±å±± ç†Šå¤§ å¤šå¤š' },
    { icon: 'ğŸ­', title: 'æ°”æ°›æ‹…å½“', content: 'çš®çš®å²‘ æ´»è·ƒæ°”æ°›ï¼Œå¦ˆå‘€ã€ä¸‹é¼ ã€æ¬§éº¦å˜ã€ä¸è¡Œäº†â€”â€”é‡‘å¥é¢‘å‡ºã€‚', quote: 'å¦ˆå‘€ æ¬§éº¦å˜ ä¸è¡Œäº†' },
    { icon: 'ğŸ‘‘', title: 'é«˜è´µçš„ç¾¤ä¸»', content: 'å˜´å­å“¥ æ¥è‡ªè´µå·ï¼Œä¸å¸¸åœ¨çº¿ã€æ—¶è€Œå¤±è¸ªï¼Œä½†ç¾¤ä¸»åœ°ä½ç¨³å›ºã€‚', quote: 'é«˜è´µçš„ç¾¤ä¸»' },
    { icon: 'ğŸº', title: 'æ´»è·ƒåˆ†å­', content: 'è¿ä¹ æ·®å®‰ã€æ— é”¡ã€æ­å·éƒ½å¾…è¿‡ï¼Œå—· [æ—ºæŸ´] å¸¸å‡ºæ²¡ã€‚', quote: 'å—· [æ—ºæŸ´]' },
    { icon: 'ğŸ“', title: 'é«˜å†·ç”·è€å¸ˆ', content: 'æ— é€»è¾‘ åœ¨åŒ—äº¬ï¼Œä¸å¸¸è¯´è¯ï¼Œé«˜å†·ç”·è€å¸ˆäººè®¾ä¸å€’ã€‚', quote: 'é«˜å†·ç”·è€å¸ˆ' }
  ],
  keywords: [
    { word: 'å“ˆå“ˆ', cls: 'large' }, { word: 'æ”¾å±', cls: 'large' }, { word: 'å±±å±±', cls: 'large' },
    { word: 'ç¾é£Ÿ', cls: 'medium' }, { word: 'æ€»è£', cls: 'medium' }, { word: 'å…¬ä¸»', cls: 'medium' },
    { word: 'ç†Šå¤§', cls: 'medium' }, { word: 'å¤šå¤š', cls: 'medium' }, { word: 'å¦ˆå‘€', cls: 'medium' },
    { word: 'æ¬§éº¦å˜', cls: 'medium' }, { word: 'ä¸è¡Œäº†', cls: 'medium' }, { word: 'ä¸‹é¼ ', cls: 'medium' },
    { word: 'å—·', cls: '' }, { word: 'æ—ºæŸ´', cls: '' }, { word: 'æ— é”¡', cls: '' }, { word: 'æ­å·', cls: '' },
    { word: 'æ·®å®‰', cls: '' }, { word: 'è´µå·', cls: '' }, { word: 'åŒ—äº¬', cls: '' }, { word: 'æ²ˆé˜³', cls: '' },
    { word: 'å¸¸å·', cls: '' }, { word: 'æ´»è·ƒ', cls: '' }, { word: 'ç¾¤ä¸»', cls: '' }
  ],
  memoryWall: [
    { sender: 'å±±å±±', time: '2025-06-12 20:15', content: 'å“ˆå“ˆ æ”¾å±' },
    { sender: 'çš®çš®å²‘', time: '2025-07-03 14:22', content: 'å¦ˆå‘€ æ¬§éº¦å˜ ä¸è¡Œäº†' },
    { sender: 'å¼¥ä¸€', time: '2025-08-08 21:30', content: 'å±±å±± ç†Šå¤§ å¤šå¤š' },
    { sender: 'è¿ä¹', time: '2025-04-18 19:45', content: 'å—· [æ—ºæŸ´]' },
    { sender: 'æ‹', time: '2025-09-01 11:00', content: '[å›¾ç‰‡][è¡¨æƒ…]' },
    { sender: 'å±±å±±', time: '2025-10-05 18:20', content: 'ç¾é£Ÿ æ€»è£ å…¬ä¸»' },
    { sender: 'å˜´å­å“¥', time: '2025-02-14 22:00', content: 'ç¾¤ä¸»' },
    { sender: 'çš®çš®å²‘', time: '2025-11-11 16:40', content: 'å¦ˆå‘€ä¸‹é¼  æ¬§éº¦å˜ä¸è¡Œäº†' },
    { sender: 'å±±å±±', time: '2025-05-20 12:08', content: 'å“ˆå“ˆæ”¾å±' },
    { sender: 'æ— é€»è¾‘', time: '2025-12-01 09:15', content: 'é«˜å†·ç”·è€å¸ˆ' },
    { sender: 'è¿ä¹', time: '2025-03-22 23:10', content: 'æ— é”¡æ­å· æ´»è·ƒ' },
    { sender: 'å¼¥ä¸€', time: '2025-01-30 20:45', content: 'å±±å±±ç†Šå¤§å¤šå¤š' }
  ],
  members: ['è¿ä¹', 'æ‹', 'å¼¥ä¸€', 'çš®çš®å²‘', 'å˜´å­å“¥', 'å±±å±±', 'æ— é€»è¾‘']
};

// ============ Snow Effect ============
function createSnow() {
  const chars = ['â„','â…','â†','âœ¦','Â·'];
  for (let i = 0; i < 40; i++) {
    const s = document.createElement('div');
    s.className = 'snowflake';
    s.textContent = chars[Math.floor(Math.random()*chars.length)];
    s.style.left = Math.random()*100 + '%';
    s.style.fontSize = (Math.random()*0.8 + 0.5) + 'em';
    s.style.opacity = Math.random()*0.5 + 0.3;
    s.style.animationDuration = (Math.random()*8 + 6) + 's';
    s.style.animationDelay = Math.random()*10 + 's';
    document.body.appendChild(s);
  }
}
createSnow();

// ============ Fireworks ============
const fwCanvas = document.getElementById('fireworks-canvas');
const fwCtx = fwCanvas.getContext('2d');
let fireworks = [], particles = [];

function resizeCanvas() {
  fwCanvas.width = window.innerWidth;
  fwCanvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

class Firework {
  constructor() {
    this.x = Math.random()*fwCanvas.width;
    this.y = fwCanvas.height;
    this.targetY = Math.random()*fwCanvas.height*0.4 + 50;
    this.speed = 3 + Math.random()*3;
    this.hue = Math.random()*60 + 340; // reds & golds
    this.alive = true;
  }
  update() {
    this.y -= this.speed;
    if (this.y <= this.targetY) {
      this.alive = false;
      for (let i = 0; i < 50; i++) {
        particles.push(new Particle(this.x, this.y, this.hue));
      }
    }
  }
  draw() {
    fwCtx.beginPath();
    fwCtx.arc(this.x, this.y, 2, 0, Math.PI*2);
    fwCtx.fillStyle = `hsl(${this.hue},100%,70%)`;
    fwCtx.fill();
  }
}

class Particle {
  constructor(x, y, hue) {
    this.x = x; this.y = y;
    this.hue = hue + Math.random()*30 - 15;
    const angle = Math.random()*Math.PI*2;
    const speed = Math.random()*4 + 1;
    this.vx = Math.cos(angle)*speed;
    this.vy = Math.sin(angle)*speed;
    this.alpha = 1;
    this.decay = Math.random()*0.02 + 0.015;
  }
  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.vy += 0.04;
    this.alpha -= this.decay;
  }
  draw() {
    fwCtx.beginPath();
    fwCtx.arc(this.x, this.y, 1.5, 0, Math.PI*2);
    fwCtx.fillStyle = `hsla(${this.hue},100%,60%,${this.alpha})`;
    fwCtx.fill();
  }
}

let fwInterval;
function startFireworks() {
  fwInterval = setInterval(() => {
    if (Math.random() < 0.3) fireworks.push(new Firework());
  }, 400);
  animateFireworks();
}

function animateFireworks() {
  requestAnimationFrame(animateFireworks);
  fwCtx.globalCompositeOperation = 'destination-out';
  fwCtx.fillStyle = 'rgba(0,0,0,0.15)';
  fwCtx.fillRect(0,0,fwCanvas.width,fwCanvas.height);
  fwCtx.globalCompositeOperation = 'lighter';

  fireworks = fireworks.filter(f => { f.update(); f.draw(); return f.alive; });
  particles = particles.filter(p => { p.update(); p.draw(); return p.alpha > 0; });
}
startFireworks();

// ============ é—ªçƒæ˜Ÿæ˜Ÿ ============
function initTwinkleStars() {
  const container = document.getElementById('twinkle-stars');
  for (let i = 0; i < 25; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.left = Math.random() * 100 + '%';
    star.style.top = Math.random() * 100 + '%';
    star.style.animationDelay = Math.random() * 3 + 's';
    star.style.animationDuration = (2 + Math.random() * 2) + 's';
    container.appendChild(star);
  }
}
initTwinkleStars();

// ============ æµ®åŠ¨èƒŒæ™¯ç²’å­ ============
function initFloatParticles() {
  const container = document.getElementById('float-particles');
  const count = 35;
  for (let i = 0; i < count; i++) {
    const dot = document.createElement('div');
    dot.className = 'float-dot' + (Math.random() > 0.6 ? ' red' : '');
    dot.style.left = Math.random() * 100 + '%';
    dot.style.top = Math.random() * 100 + '%';
    dot.style.animationDelay = Math.random() * 15 + 's';
    dot.style.animationDuration = (12 + Math.random() * 8) + 's';
    container.appendChild(dot);
  }
}
initFloatParticles();

// ============ è§¦æ‘¸/ç‚¹å‡»ç‰¹æ•ˆ ============
const BURST_EMOJI = ['âœ¨', 'ğŸ§§', 'ç¦', 'ğŸ’°', 'â„ï¸', 'ğŸ‰', 'ğŸŒŸ', 'â­', 'ğŸ’«', 'ğŸŠ', 'â™¥ï¸', 'ğŸŒ¸'];
let lastTouchTime = 0;
const TOUCH_THROTTLE = 400;

function getEventPos(e) {
  if (e.touches && e.touches.length) return { x: e.touches[0].clientX, y: e.touches[0].clientY };
  if (e.changedTouches && e.changedTouches.length) return { x: e.changedTouches[0].clientX, y: e.changedTouches[0].clientY };
  return { x: e.clientX, y: e.clientY };
}

function createRipple(x, y) {
  const r = document.createElement('div');
  r.className = 'touch-ripple';
  r.style.left = x + 'px';
  r.style.top = y + 'px';
  document.body.appendChild(r);
  setTimeout(() => r.remove(), 850);
}

function createBurst(x, y) {
  const container = document.getElementById('touch-burst-container');
  const n = 8 + Math.floor(Math.random() * 5);
  for (let i = 0; i < n; i++) {
    const p = document.createElement('div');
    p.className = 'burst-particle';
    p.textContent = BURST_EMOJI[Math.floor(Math.random() * BURST_EMOJI.length)];
    p.style.left = x + 'px';
    p.style.top = y + 'px';
    const angle = (Math.PI * 2 * i) / n + Math.random() * 0.5;
    const dist = 60 + Math.random() * 80;
    const tx = Math.cos(angle) * dist;
    const ty = Math.sin(angle) * dist;
    p.style.setProperty('--tx', tx + 'px');
    p.style.setProperty('--ty', ty + 'px');
    p.style.animationDelay = (i * 0.02) + 's';
    container.appendChild(p);
    setTimeout(() => p.remove(), 1100);
  }
}

function onTouchOrClick(e) {
  const now = Date.now();
  if (now - lastTouchTime < TOUCH_THROTTLE) return;
  lastTouchTime = now;
  const pos = e.type.includes('touch') ? getEventPos(e) : { x: e.clientX, y: e.clientY };
  if (pos.x == null || pos.y == null) return;
  createRipple(pos.x, pos.y);
  createBurst(pos.x, pos.y);
}

document.addEventListener('click', onTouchOrClick);
document.addEventListener('touchstart', onTouchOrClick, { passive: true });
document.addEventListener('touchend', onTouchOrClick, { passive: true });

// ============ Scroll Animations ============
const scrollObserver = new IntersectionObserver((entries) => {
  entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
}, { threshold: 0.1 });

function observeElements() {
  document.querySelectorAll('.animate-on-scroll').forEach(el => scrollObserver.observe(el));
}

// Back button
window.addEventListener('scroll', () => {
  document.getElementById('backBtn').style.display = window.scrollY > 400 ? 'block' : 'none';
});

// ============ æ¸²æŸ“å›ºå®šå¹´åº¦å›é¡¾ ============
function renderFixedReview() {
  const s = FIXED.stats;
  const months = ['1æœˆ','2æœˆ','3æœˆ','4æœˆ','5æœˆ','6æœˆ','7æœˆ','8æœˆ','9æœˆ','10æœˆ','11æœˆ','12æœˆ'];
  const maxMonth = Math.max(...FIXED.monthlyCount, 1);

  document.getElementById('statsGrid').innerHTML = [
    { icon: 'ğŸ’¬', number: s.totalMessages, label: 'æ€»æ¶ˆæ¯æ•°' },
    { icon: 'ğŸ‘¥', number: s.memberCount, label: 'ç¾¤æˆå‘˜æ•°' },
    { icon: 'ğŸ“…', number: s.activeDays, label: 'æ´»è·ƒå¤©æ•°' },
    { icon: 'ğŸ“ˆ', number: s.avgPerDay, label: 'æ—¥å‡æ¶ˆæ¯' },
    { icon: 'ğŸ”¥', number: s.busiestCount, label: `æœ€å¿™çš„ä¸€å¤© (${s.busiestDay})` },
    { icon: 'â°', number: s.peakHour + ':00', label: 'èŠå¤©é«˜å³°æ—¶æ®µ' },
  ].map(x => `
    <div class="stat-card">
      <div class="icon">${x.icon}</div>
      <div class="number">${x.number}</div>
      <div class="label">${x.label}</div>
    </div>
  `).join('');

  document.getElementById('monthlyChart').innerHTML = FIXED.monthlyCount.map((c, i) => `
    <div class="bar-col">
      <div class="bar-value">${c}</div>
      <div class="bar" style="height:${(c/maxMonth)*100}%"></div>
      <div class="bar-label">${months[i]}</div>
    </div>
  `).join('');

  document.getElementById('rankingList').innerHTML = FIXED.top3.map((item, i) => {
    const barW = i === 0 ? 100 : i === 1 ? 75 : 50;
    const pctText = item.pct === 'â€”' ? 'â€”' : item.pct + '%';
    return `
    <div class="ranking-item">
      <div class="rank">${item.rank}</div>
      <div class="info">
        <div class="name">${item.name}</div>
        <div class="detail">å æ¯” ${pctText}</div>
        <div class="bar-bg"><div class="bar-fill" style="width:${barW}%"></div></div>
      </div>
      <div class="count">${pctText}</div>
    </div>
  `;
  }).join('');

  document.getElementById('highlightsGrid').innerHTML = FIXED.highlights.map(h => `
    <div class="highlight-card">
      <div class="card-icon">${h.icon}</div>
      <div class="card-title">${h.title}</div>
      <div class="card-content">${h.content}</div>
      ${h.quote ? `<div class="card-quote">"${h.quote}"</div>` : ''}
    </div>
  `).join('');

  document.getElementById('keywordCloud').innerHTML = FIXED.keywords.map(k =>
    `<span class="keyword ${k.cls}">${k.word}</span>`
  ).join('');

  document.getElementById('memoryWall').innerHTML = FIXED.memoryWall.map(m => `
    <div class="memory-card">
      <div class="msg-sender">${m.sender}</div>
      <div class="msg-time">${m.time}</div>
      <div class="msg-text">${m.content}</div>
    </div>
  `).join('');

  document.getElementById('greetingSection').innerHTML = `
    <div class="big-emoji">ğŸ§§</div>
    <h2>æ–°å¹´å¿«ä¹</h2>
    <div class="blessing">
      è¿™ä¸€å¹´ï¼Œæˆ‘ä»¬è™½ç„¶ç´ æœªè°‹é¢<br>
      å´åœ¨å°å°çš„ç¾¤èŠé‡Œåˆ†äº«äº† ${s.totalMessages} æ¡æ¶ˆæ¯<br>
      ${s.activeDays} ä¸ªæ—¥å¤œçš„é™ªä¼´<br>
      è·¨è¶Šå±å¹•çš„æ¸©æš–ï¼Œæ¯”ä»€ä¹ˆéƒ½çè´µ<br><br>
      æ„Ÿè°¢ ${s.memberCount} ä½å°ä¼™ä¼´çš„æ¯ä¸€å¥é—®å€™ã€æ¯ä¸€ä¸ªæ·±å¤œçš„é™ªä¼´<br>
      æ–°çš„ä¸€å¹´ï¼Œæ„¿æˆ‘ä»¬çš„æ•…äº‹ç»§ç»­<br>
      æ„¿æ‰€æœ‰çš„ç¾å¥½å¦‚æœŸè€Œè‡³ âœ¨
    </div>
    <div class="members-list">
      ${FIXED.members.map(m => `<span class="member-tag">${m}</span>`).join('')}
    </div>
    <div class="sign-off">â€”â€” æ¥è‡ªã€Œ${GROUP_NAME}ã€çš„æ–°å¹´ç¥ç¦ Â· 2026 â€”â€”</div>
  `;

  setTimeout(observeElements, 100);
  bindRedEnvelope();
}

// ============ çº¢åŒ…æ‰“å¼€ç‰¹æ•ˆ ============
function bindRedEnvelope() {
  const btn = document.getElementById('redEnvelopeBtn');
  const overlay = document.getElementById('redEnvelopeOverlay');
  if (!btn || !overlay) return;

  function handleOpen(e) {
    e.preventDefault();
    e.stopPropagation();
    openRedEnvelope();
  }

  btn.addEventListener('click', handleOpen);
  btn.addEventListener('touchend', function(e) {
    e.preventDefault();
    handleOpen(e);
  }, { passive: false });

  overlay.addEventListener('click', function(e) {
    if (e.target === overlay) closeRedEnvelope();
  });
  overlay.addEventListener('touchend', function(e) {
    if (e.target === overlay) closeRedEnvelope();
  }, { passive: true });
  const closeBtn = document.getElementById('redEnvelopeCloseBtn');
  if (closeBtn) {
    closeBtn.addEventListener('click', closeRedEnvelope);
    closeBtn.addEventListener('touchend', function(e) {
      e.preventDefault();
      closeRedEnvelope();
    }, { passive: false });
  }
}

// ç½‘æ˜“äº‘ä¼šå‘˜ä¸­å¥–æ¦‚ç‡ï¼šæ­£å¼ 1/1000ï¼Œå½“å‰æµ‹è¯• 1/2
const RED_ENVELOPE_SPECIAL_RATE = 1 / 10*7*7;
const RED_ENVELOPE_SPECIAL_PRIZE = 'ğŸµ ç½‘æ˜“äº‘ä¼šå‘˜ä¸€ä¸ªæœˆ';

const HINT_NORMAL = 'æˆªå›¾æ‰¾ç†Šå¤§ åœ¨ 2 æœˆ 14 å· å…‘æ¢ï¼ˆä¸è¦çš„è¯ç¾¤é‡Œå‘ç†ŠäºŒä»£æ”¶( Ì€âŒ„ Ì)ï¼‰';
const HINT_SPECIAL = 'ç¬¬ä¸€ä¸ªæˆªå›¾åœ¨ 2 æœˆ 14 å·å‰å‘ç»™ ç†ŠäºŒ å…‘æ¢';

function openRedEnvelope() {
  const overlay = document.getElementById('redEnvelopeOverlay');
  const amountEl = document.getElementById('redEnvelopeAmount');
  const amountLabelEl = document.getElementById('redEnvelopeAmountLabel');
  const amountWrap = document.getElementById('redEnvelopeAmountWrap');
  const hintEl = document.getElementById('redEnvelopeHint');
  const blessingEl = document.getElementById('redEnvelopeBlessing');
  const modal = overlay ? overlay.querySelector('.red-envelope-modal') : null;

  if (!overlay || !amountEl) return;

  if (blessingEl) blessingEl.classList.remove('show');

  const isSpecial = Math.random() < RED_ENVELOPE_SPECIAL_RATE;

  if (isSpecial) {
    if (amountLabelEl) amountLabelEl.textContent = 'ç‰¹åˆ«å¥–';
    amountEl.className = 'amount special-prize';
    amountEl.innerHTML = RED_ENVELOPE_SPECIAL_PRIZE;
    if (hintEl) hintEl.textContent = HINT_SPECIAL;
  } else {
    if (amountLabelEl) amountLabelEl.textContent = 'FF14 é‡‘å¸';
    amountEl.className = 'amount';
  const gil = Math.floor(1550000 + Math.random() * (2500000 - 1550000 + 1));
    amountEl.innerHTML = gil.toLocaleString() + '<span class="unit">Gil</span>';
    if (hintEl) hintEl.textContent = HINT_NORMAL;
  }

  amountWrap.style.opacity = '0';
  amountWrap.style.transform = 'scale(0.5)';

  overlay.classList.add('show');

  if (modal) {
    const flyEmoji = isSpecial ? 'ğŸµ' : 'ğŸ’°';
    for (let i = 0; i < 12; i++) {
      const coin = document.createElement('div');
      coin.className = 'coins-fly';
      coin.textContent = flyEmoji;
      coin.style.left = '50%';
      coin.style.top = '50%';
      const angle = (Math.PI * 2 * i) / 12 + Math.random() * 0.3;
      const d = 80 + Math.random() * 60;
      coin.style.setProperty('--fx', Math.cos(angle) * d + 'px');
      coin.style.setProperty('--fy', Math.sin(angle) * d + 'px');
      modal.appendChild(coin);
      setTimeout(() => coin.remove(), 1100);
    }
  }

  setTimeout(() => {
    if (blessingEl) blessingEl.classList.add('show');
  }, 350);

  setTimeout(() => {
    amountWrap.style.transition = 'opacity 0.4s, transform 0.4s';
    amountWrap.style.opacity = '1';
    amountWrap.style.transform = 'scale(1)';
  }, 400);
}

function closeRedEnvelope() {
  const overlay = document.getElementById('redEnvelopeOverlay');
  overlay.classList.remove('show');
  const blessingEl = document.getElementById('redEnvelopeBlessing');
  if (blessingEl) blessingEl.classList.remove('show');
}

document.addEventListener('DOMContentLoaded', renderFixedReview);
</script>
</body>
</html>
